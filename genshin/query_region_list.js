const protobuf = require("protobufjs");

async function query_list_test() {
    var query_region_list = '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';
    
    var hack_query = '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'

    const root = await protobuf.load("proto/QueryRegionListHttpRsp.proto");
    const testMessage = root.lookup("QueryRegionListHttpRsp");
    const message = testMessage.decode(Buffer.from(hack_query, 'base64'));
    //message["regionList"][0].title = zhuzhuÊúç
    //message["regionList"][0].dispatchUrl ='http://localhost:80/query_cur_region'
    const encoded = testMessage.encode(message).finish();
    return encoded;
}

module.exports = {
    async execute(req, res) {
        
        var ret = await query_list_test();
        res.end(Buffer.from(ret).toString('base64'));
    }

}